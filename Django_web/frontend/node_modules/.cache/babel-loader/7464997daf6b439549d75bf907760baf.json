{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\drago\\\\Documents\\\\Github Repository VSCode\\\\DB_end_project\\\\Django_web\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\drago\\\\Documents\\\\Github Repository VSCode\\\\DB_end_project\\\\Django_web\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\drago\\\\Documents\\\\Github Repository VSCode\\\\DB_end_project\\\\Django_web\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useContext,useEffect}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import{useState}from\"react\";import{motion,AnimatePresence}from\"framer-motion\";import Modal from\"./modal\";import{Modal2}from\"./modal\";import useModal from\"./hooks/useModal\";import AuthContext from\"../../utils/AuthContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Items=function Items(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),notes=_useState2[0],setNotes=_useState2[1];var _useContext=useContext(AuthContext),authTokens=_useContext.authTokens,logoutUser=_useContext.logoutUser;useEffect(function(){getNotes();},[]);var getNotes=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/items/\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+String(authTokens.access)}});case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;if(response.status===200){setNotes(data);}else if(response.statusText===\"Unauthorized\"){logoutUser();}case 7:case\"end\":return _context.stop();}}},_callee);}));return function getNotes(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:notes[0]});};var Items2=function Items2(){var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),notes=_useState4[0],setNotes=_useState4[1];var _useContext2=useContext(AuthContext),authTokens=_useContext2.authTokens,logoutUser=_useContext2.logoutUser;useEffect(function(){getNotes();},[]);var getNotes=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"/api/ordercount/\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+String(authTokens.access)}});case 2:response=_context2.sent;_context2.next=5;return response.json();case 5:data=_context2.sent;if(response.status===200){setNotes(data);}else if(response.statusText===\"Unauthorized\"){logoutUser();}case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function getNotes(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:notes[0]});};export var Header=function Header(){var _useModal=useModal(),modalOpen=_useModal.modalOpen,close=_useModal.close,open=_useModal.open;var _useContext3=useContext(AuthContext),user=_useContext3.user;var navigate=useNavigate();return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"nav\",{className:\"navbar navbar-expand-lg navbar-light shadow\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"navbar-brand text-success logo h1 align-self-center\",children:\"Keken Empire\"}),/*#__PURE__*/_jsx(\"button\",{className:\"navbar-toggler border-0\",type:\"button\",\"data-bs-toggle\":\"collapse\",\"data-bs-target\":\"#templatemo_main_nav\",\"aria-controls\":\"navbarSupportedContent\",\"aria-expanded\":\"false\",\"aria-label\":\"Toggle navigation\",children:/*#__PURE__*/_jsx(\"span\",{className:\"navbar-toggler-icon\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"align-self-center collapse navbar-collapse flex-fill  d-lg-flex justify-content-lg-between\",id:\"templatemo_main_nav\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-fill\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"nav navbar-nav d-flex justify-content-between mx-lg-auto\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"nav-link\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/about\",className:\"nav-link\",children:\"About\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/shop\",className:\"nav-link\",children:\"Shop\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"navbar align-self-center d-flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-lg-none flex-sm-fill mt-3 mb-4 col-7 col-sm-auto pr-3\"}),/*#__PURE__*/_jsxs(motion.button,{className:\"nav-icon position-relative text-decoration-none save-button\",whileHover:{scale:1.3},whileTap:{scale:0.9},onClick:function onClick(){navigate(\"/order\");},children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-fw fas fa-bell text-dark mr-1\"}),/*#__PURE__*/_jsx(\"span\",{className:\"position-absolute top-0 left-100 translate-middle badge rounded-pill bg-light text-dark\",children:/*#__PURE__*/_jsx(Items2,{})})]}),/*#__PURE__*/_jsxs(motion.button,{className:\"nav-icon position-relative text-decoration-none save-button\",whileHover:{scale:1.3},whileTap:{scale:0.9},onClick:function onClick(){navigate(\"/cart\");},children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-fw fa-cart-arrow-down text-dark mr-1\"}),/*#__PURE__*/_jsx(\"span\",{className:\"position-absolute top-0 left-100 translate-middle badge rounded-pill bg-light text-dark\",children:/*#__PURE__*/_jsx(Items,{})})]}),/*#__PURE__*/_jsx(motion.button,{whileHover:{scale:1.3},whileTap:{scale:0.9},className:\"save-button\",onClick:function onClick(){return modalOpen?close():open();},children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-fw fa-user text-dark mr-3\"})}),/*#__PURE__*/_jsx(AnimatePresence,{initial:false,exitBeforeEnter:true,onExitComplete:function onExitComplete(){return window.location.reload();},children:user?modalOpen===true&&/*#__PURE__*/_jsx(Modal2,{handleClose:close}):modalOpen===true&&/*#__PURE__*/_jsx(Modal,{handleClose:close})})]})]})]})})});};","map":{"version":3,"sources":["C:/Users/drago/Documents/Github Repository VSCode/DB_end_project/Django_web/frontend/src/pages/components/header.tsx"],"names":["React","useContext","useEffect","Link","useNavigate","useState","motion","AnimatePresence","Modal","Modal2","useModal","AuthContext","Items","notes","setNotes","authTokens","logoutUser","getNotes","fetch","method","headers","Authorization","String","access","response","json","data","status","statusText","Items2","Header","modalOpen","close","open","user","navigate","scale","window","location","reload"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { useState } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport Modal from \"./modal\";\r\nimport { Modal2 } from \"./modal\";\r\nimport useModal from \"./hooks/useModal\";\r\nimport AuthContext from \"../../utils/AuthContext\";\r\n\r\nconst Items = () => {\r\n  let [notes, setNotes] = useState([]);\r\n  let { authTokens, logoutUser } = useContext(AuthContext);\r\n\r\n  useEffect(() => {\r\n    getNotes();\r\n  }, []);\r\n\r\n  let getNotes = async () => {\r\n    let response = await fetch(\"/api/items/\", {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + String(authTokens.access),\r\n      },\r\n    });\r\n    let data = await response.json();\r\n\r\n    if (response.status === 200) {\r\n      setNotes(data);\r\n    } else if (response.statusText === \"Unauthorized\") {\r\n      logoutUser();\r\n    }\r\n  };\r\n\r\n  return <div>{notes[0]}</div>;\r\n};\r\n\r\nconst Items2 = () => {\r\n  let [notes, setNotes] = useState([]);\r\n  let { authTokens, logoutUser } = useContext(AuthContext);\r\n\r\n  useEffect(() => {\r\n    getNotes();\r\n  }, []);\r\n\r\n  let getNotes = async () => {\r\n    let response = await fetch(\"/api/ordercount/\", {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + String(authTokens.access),\r\n      },\r\n    });\r\n    let data = await response.json();\r\n\r\n    if (response.status === 200) {\r\n      setNotes(data);\r\n    } else if (response.statusText === \"Unauthorized\") {\r\n      logoutUser();\r\n    }\r\n  };\r\n\r\n  return <div>{notes[0]}</div>;\r\n};\r\n\r\nexport const Header = () => {\r\n  const { modalOpen, close, open } = useModal();\r\n  let { user } = useContext(AuthContext);\r\n  let navigate = useNavigate();\r\n\r\n  return (\r\n    <div>\r\n      <nav className=\"navbar navbar-expand-lg navbar-light shadow\">\r\n        <div className=\"container d-flex justify-content-between align-items-center\">\r\n          <Link\r\n            to=\"/\"\r\n            className=\"navbar-brand text-success logo h1 align-self-center\"\r\n          >\r\n            Keken Empire\r\n          </Link>\r\n\r\n          <button\r\n            className=\"navbar-toggler border-0\"\r\n            type=\"button\"\r\n            data-bs-toggle=\"collapse\"\r\n            data-bs-target=\"#templatemo_main_nav\"\r\n            aria-controls=\"navbarSupportedContent\"\r\n            aria-expanded=\"false\"\r\n            aria-label=\"Toggle navigation\"\r\n          >\r\n            <span className=\"navbar-toggler-icon\"></span>\r\n          </button>\r\n\r\n          <div\r\n            className=\"align-self-center collapse navbar-collapse flex-fill  d-lg-flex justify-content-lg-between\"\r\n            id=\"templatemo_main_nav\"\r\n          >\r\n            <div className=\"flex-fill\">\r\n              <ul className=\"nav navbar-nav d-flex justify-content-between mx-lg-auto\">\r\n                <li className=\"nav-item\">\r\n                  <Link to=\"/\" className=\"nav-link\">\r\n                    Home\r\n                  </Link>\r\n                </li>\r\n                <li className=\"nav-item\">\r\n                  <Link to=\"/about\" className=\"nav-link\">\r\n                    About\r\n                  </Link>\r\n                </li>\r\n                <li className=\"nav-item\">\r\n                  <Link to=\"/shop\" className=\"nav-link\">\r\n                    Shop\r\n                  </Link>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n            <div className=\"navbar align-self-center d-flex\">\r\n              <div className=\"d-lg-none flex-sm-fill mt-3 mb-4 col-7 col-sm-auto pr-3\"></div>\r\n              <motion.button\r\n                className=\"nav-icon position-relative text-decoration-none save-button\"\r\n                whileHover={{ scale: 1.3 }}\r\n                whileTap={{ scale: 0.9 }}\r\n                onClick={() => {\r\n                  navigate(\"/order\");\r\n                }}\r\n              >\r\n                <i className=\"fa fa-fw fas fa-bell text-dark mr-1\"></i>\r\n                <span className=\"position-absolute top-0 left-100 translate-middle badge rounded-pill bg-light text-dark\">\r\n                  <Items2 />\r\n                </span>\r\n              </motion.button>\r\n              <motion.button\r\n                className=\"nav-icon position-relative text-decoration-none save-button\"\r\n                whileHover={{ scale: 1.3 }}\r\n                whileTap={{ scale: 0.9 }}\r\n                onClick={() => {\r\n                  navigate(\"/cart\");\r\n                }}\r\n              >\r\n                <i className=\"fa fa-fw fa-cart-arrow-down text-dark mr-1\"></i>\r\n                <span className=\"position-absolute top-0 left-100 translate-middle badge rounded-pill bg-light text-dark\">\r\n                  <Items />\r\n                </span>\r\n              </motion.button>\r\n              <motion.button\r\n                whileHover={{ scale: 1.3 }}\r\n                whileTap={{ scale: 0.9 }}\r\n                className=\"save-button\"\r\n                onClick={() => (modalOpen ? close() : open())}\r\n              >\r\n                <i className=\"fa fa-fw fa-user text-dark mr-3\"></i>\r\n              </motion.button>\r\n              <AnimatePresence\r\n                initial={false}\r\n                exitBeforeEnter={true}\r\n                onExitComplete={() => window.location.reload()}\r\n              >\r\n                {user\r\n                  ? modalOpen === true && <Modal2 handleClose={close} />\r\n                  : modalOpen === true && <Modal handleClose={close} />}\r\n              </AnimatePresence>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n    </div>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}